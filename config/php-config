Before you start

    On the course server, each group has it's own Apache Server. As you may have known, PHP is an Embeded Script Language, which means it is closely related to the Web Server. For this homework, we are going to build PHP as one Load Module of Apache. In order not to conflict with others, be very careful when you specify the information about the Apache Server. All groups will share the same MySQL server. Each group will use it's own MySQL userid to create different database and different tables as required.

step1 Building

    Logon to the course server with SSH client. Suppose the group numbe is 0. In the /home/tar_source directory, you should see a tar file php-5.*.*.tar.bz2. Make a new directory named php under the home directory by executing:
    mkdir php
    Then execute command (still in the home directory):
    tar -xjf /home/tar_source/php-5.0.5.tar.bz2
    to un-tar it. The suffix bz2 means another compression format. A j option is needed to run the un-tar. After that, you should see a directory php-5.0.5Go into that directory. Type exactly the following command to be ready for the compiling of the PHP system:
    ./configure --prefix=/home/2012/y2012g0/php --exec-prefix=/home/2012/y2012g0/php --with-mysql --with-apxs2=/home/2012/y2012g0/apache/bin/apxs
    The '--prefix' specify where the PHP system locates, the '--with-mysql' tells that we are going to access MySQL database, the '--with-apxs2' specify the file name which keep all information about the Apache Server, the ending 2 say that you are using Apahce of version 2.0 or higher. You can find more information about how to configure in file INSTALL. Note: Use your own group number instead of 0.
    Wait.....
    Run the command(Still in the directory php-5.0.5):
    make
    to build the PHP and wait......
    run(Still in the directory php-5.0.5):
    make install
    to put the PHP system in the right position.

    If nothing goes wrong continue with the next step.

step2 Configure the Apache and PHP

    The PHP will be Loaded by the Apache Server as an Moudle. In order to do that, first check if there is a file named libphp5.so in the directory ~/apache/modules, this flile is the module we are going to load, it is generated by step1.
    Edit the configuration file of Apache httpd.conf .
    Locate the directive LoadModule and make sure that a line like the following is there

    LoadModule php5_module modules/libphp5.so

    which tells the apache to load the PHP module when it is started.
    Locate the directive AddType and add around

    AddType application/x-httpd-php .php

    Which tell Apache that files with a .php suffix are PHP script.

    Configuration information about the new PHP will be in a file named php.ini in the directory ~/php/lib. Note: ~ represents the home directory of your group.Copy a sample php.ini to this directory by executing the following command:
    cp ~/php-5.0.5/php.ini-dist ~/php/lib/php.ini
    Note: ~ represents the home directory. The new file name should be php.ini

    Edit this ~/php/lib/php.ini file, turn on the switch register_globals =On. By doing this, in PHP program, you can directly access those valuse of Form fields and Cookie variable as a common PHP variable by refering the name. After PHP4.0, the switch is turn off by default. Other way is provided to access these variables when this switch is off. 

step3 Test the configuration

    Stop the Apache Server by runing:
    apachectl stop
    and start it by runng:
    apachectl start
    Note , you can not use apachectl restart because the Apache needs to load a new module.

    In the DocumentRoot Directory of the Apache, generate a file named first.php which contains only one words:
    <?php phpinfo( ) ?>
    phpinfo( ) is called to print some informations about the PHP you have just built.

    At last, use Browser to point at this simple PHP script and see what you get!
    I bet you know the URL. 
